#!/usr/bin/env ruby

require './lib/qc'

def help_header cmd, options
  <<HEADER
qc.rb (Version) is a QingCloud API CLI

qc #{cmd}

Options:
#{options}
Website:
  https://github.com/qc.rb
HEADER
end

case ARGV[0]
when 'ssh'
  case ARGV[1]
  when 'list'
    r = QC::API::Request.new 'DescribeKeyPairs'
    r.execute!(QC::Key)['keypair_set'].to_a.each do |k|
      puts <<KEYS
ID:                "#{k['keypair_id']}"
Name:              "#{k['keypair_name']}"
Creation Date:     "#{k['create_time']}"
Encryption Method: "#{k["encrypt_method"]}"
Description:
"#{k['description']}"
Public Key:
"#{k['pub_key']}"

KEYS
    end
  else
    puts help_header('ssh [option]', <<HELP)
  list     List all public keys  
HELP
  end
else
  puts help_header('[option]', <<HELP)
  ssh      SSH Key Management
  img      Image Managements (available Operator Systems)
  sec      Security Group Management (Firewall rules)
  ip       IP Management (Internet Bandwidth)
  route    Router Managemen
  net      Software Defined Network Management
  vol      Volume Management (add, change and remove HDDs)
  ins      Instance Management (manipulate machines)
HELP
end

